# ПУНКТ 2. Використання методів рефакторингу:    

**1. Extract Class (Відокремлення класу)**  
•	Опис: Коли клас виконує забагато функцій, частину логіки можна винести в новий клас.  
•	Зміни: Винесення логіки реєстрації/авторизації з класу User в окремий клас AuthService.  
•	Обґрунтування: Це розділяє відповідальності, тобто клас User відповідає лише за дані користувача, а не за логіку реєстрації. Це робить код більш структурованим.  

**2. Inline Method (Вбудовування методу)**    
•	Опис: Слід замінити виклики методу його вмістом і видалити сам метод.  
•	Зміни: Метод get_product_price() замінено прямим доступом до product.price і сам метод видалено.  
•	Обґрунтування: Оскільки метод містив лише доступ до поля, то в його існуванні не було потреби. Цим покращилася зв'язність і логічна структура коду.  

**3. Rename Method (Перейменування методу)**         
•	Опис: Ім'я методу має чітко передавати його призначення.  
•	Зміни: Метод create_order() краще перейменувати на place_new_order().  
•	Обґрунтування: Назва чіткіше описує дію - створення і додавання нового замовлення.  

**4. Rename Variable (Перейменування змінної)**         
•	Опис: Ім’я змінної має чітко відображати її зміст.  
•	Зміни: Метод order_items_list краще перейменувати на order_items.  
•	Обґрунтування: Нове ім’я коротше та інформативніше.  

**5. Encapsulate Field (Інкапсуляція поля)**         
•	Опис: Поля повинні мати доступ через getter/setter, а не напряму.         
•	Зміни: Інкапсуляція password через get_password() і set_password().         
•	Обґрунтування: Це необхідно для захисту даних.          

**6. Replace Type Code with Class (Заміна кодування типу класом)**         
•	Опис: Якщо є поле з фіксованим набором значень (наприклад, статус), краще винести це в окремий клас або Enum.         
•	Зміни: Створення класу OrderStatus(Enum) з полями PENDING = "Pending", COMPLETED = "Completed", CANCELLED = "Cancelled" для статусів замовлення.  
•	Обґрунтування: Покращує розуміння і структурованість коду, запобігає помилкам з орфографією і додає автодоповнення в IDE.     

**7. Hide Delegate(Приховання делегування)**
•	Опис: Метод класу делегує виклик іншому класу, і ми ховаємо це за фасадом.
•	Зміни: Додати у Order метод get_product_names(), який викликає self.order_items[i].product.product_name, а не працювати з вкладеними об’єктами у клієнтському коді.         
•	Обґрунтування: Метод повертає назви товарів, не розкриваючи структуру. Це зменшує залежність від внутрішньої структури класу і спрощує доступ до потрібної інформації.         

**8. Replace Constructor with Factory Method (Заміна конструктора  фабричним методом)**    
•	Опис: Якщо створення об'єкта вимагає певної логіки - краще це винести в фабричний метод.    
•	Зміни: Замість створення Order(...) у create_order(), можна зробити фабричний метод create_new_order.    
•	Обґрунтування: Це дозволяє централізовано керувати логікою створення замовлення.    

**9. Consolidate Duplicate Conditional Fragments (Об'єднання фрагментів, що дублюються, в умовних операторах)**    
•	Опис: Якщо кілька умовних операторів мають однакові дії, їх можна об'єднати в одну умову, щоб уникнути дублювання коду.    
•	Зміни: У методі login класу AuthService є два однакових кроки — перевірка на наявність користувача і перевірка пароля. Можна об'єднати ці умови(if not row or row[3] != password) і зробити вивід ‘Неправильний email чи пароль.’    
•	Обґрунтування: Це зменшує дублювання коду і робить його більш компактним. Також це може служити захистом від несанкціонованого доступу, адже у разі вгадування пароля чи імені користувача, зловмиснику не буде надана чітка інформація про те, де саме помилка.    

**10. Remove Dead Code(Видалення мертвого коду)**    
•	Опис: Якщо є частина коду, яка не використовується її треба видалити.    
•	Зміни: Видалити метод remove_product в класі Order.    
•	Обґрунтування: Зменшення розміру коду шляхом видалення непотрібної частини.    

**11. Extract Function (Відокремлення функції)**    
•	Опис: Слід виділити фрагмент коду в окрему функцію, щоб спростити основний код і підвищити повторне використання.    
•	Зміни: Розбити великий фрагмент коду main() на окремі функції:  show_main_menu(), show_user_menu(user_name), handle_registration(), handle_login(), handle_order_creation(user), handle_view_orders(user), і перенести get_all_products().    
•	Обґрунтування: Це спрощує читабельність main(), дозволяє повторно використовувати код.    

**12. Move Function(Переміщення функції)**    
•	Опис: Оскільки функція get_all_products() пов’язана безпосередньо з класом Product, то її слід зробити його частиною.    
•	Зміни: Перенести функцію get_all_products() до класу Product як Product.get_all().    
•	Обґрунтування: Логіка, яка стосується продуктів буде зосереджена в одному класі Product.    

# ПУНКТ 4. Обґрунтування методів рефакторингу:    

**1. Extract Class (Відокремлення класу)**    
Причина вибору: Клас User мав забагато обов’язків: і зберігання даних користувача, і логіку автентифікації. Це суперечить принципу єдиної відповідальності(SOLID).     
Функціональність: Логіку реєстрації та входу було винесено з класу User в новий клас AuthService.    
Покращення: Це зробило класи спеціалізованими, покращило підтримуваність коду та його читабельність.    

**2. Inline Method (Вбудовування методу)**    
Причина вибору: Метод get_product_price() лише повертав значення product.price, тобто був зайвим.    
Функціональність: Замість виклику методу тепер є прямий доступ до атрибуту.    
Покращення: Зменшено кількість непотрібних обгорток, код став простішим і більш лаконічним.    

**3. Rename Method (Перейменування методу)**    
Причина вибору: Метод create_order() мав нечітку назву, яка могла плутати.    
Функціональність: Метод перейменовано на place_new_order() для точнішого опису дії.    
Покращення: Покращено розуміння коду, особливо при читанні чужим розробником.    

**4. Rename Variable (Перейменування змінної)**    
Причина вибору: Ім’я order_items_list було довгим і нечитабельним.    
Функціональність: Змінна перейменована на order_items.    
Покращення: Коротше та точніше ім’я підвищує читабельність і зменшує візуальне навантаження.    

**5. Encapsulate Field (Інкапсуляція поля)**    
Причина вибору: Прямий доступ до password порушує безпечність даних.    
Функціональність: Створено методи get_password() та set_password().    
Покращення: Підвищено безпечність доступу до поля, легше реалізувати шифрування/перевірку.    

**6. Replace Type Code with Class (Заміна кодування типу класом)**    
Причина вибору: Статуси замовлень зберігались як звичайні рядки, що підвищувало ризик помилок.    
Функціональність: Створено клас OrderStatus (Enum) з фіксованими значеннями.    
Покращення: Код став безпечнішим, зменшено ймовірність орфографічних помилок і покращено автодоповнення в IDE.    

**7. Hide Delegate(Приховання делегування)**    
Причина вибору: Занадто глибока вкладеність при доступі до назв товарів.    
Функціональність: Метод get_product_names() у класі Order викликає внутрішню логіку, не розкриваючи клієнту структуру.    
Покращення: Спрощено зовнішній інтерфейс класу, зменшено залежність від структури.    

**8. Replace Constructor with Factory Method (Заміна конструктора  фабричним методом)**    
Причина вибору: Створення об'єкта Order вимагало додаткової логіки, що захаращувало основний код.    
Функціональність: Створено фабричний метод create_new_order(), який інкапсулює процес створення замовлення.    
Покращення: Централізація логіки створення спрощує супровід і зміну механізмів створення об’єкта.    

**9. Consolidate Duplicate Conditional Fragments (Об'єднання фрагментів, що дублюються, в умовних операторах)**    
Причина вибору: У методі login() були два однакові повідомлення у різних умовах.    
Функціональність: Об'єднано перевірку на неіснуючого користувача та неправильний пароль в один if.    
Покращення: Зменшено дублювання коду, покращено безпеку (не вказується точна причина помилки).    

**10. Remove Dead Code(Видалення мертвого коду)**    
Причина вибору: Метод remove_product() не використовувався.    
Функціональність: Метод повністю видалено з класу Order.    
Покращення: Зменшено обсяг коду, покращено підтримуваність і уникнуто плутанини.    

**11. Extract Function (Відокремлення функції)**    
Причина вибору: Функція main() була занадто довгою і важко читалась.    
Функціональність: Основні дії винесено в окремі функції: show_main_menu(), show_user_menu(user_name), handle_registration(), handle_login(), handle_order_creation(user), handle_view_orders(user), і перенесено get_all_products().    
Покращення: Підвищено читабельність, забезпечено можливість повторного використання.    

**12. Move Function(Переміщення функції)**    
Причина вибору: Функція get_all_products() логічно пов’язана з класом Product, але була розміщена поза ним.    
Функціональність: Метод перенесено в клас Product як статичний метод get_all().    
Покращення: Логіка, що стосується продуктів, зосереджена в одному місці.    


